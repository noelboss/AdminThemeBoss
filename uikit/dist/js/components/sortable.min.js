/*! UIkit 3.0.0-beta.40 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("uikitsortable",e):t.UIkitSortable=e()}(this,function(){"use strict";function B(o){var t;if(!B.installed){var e=o.mixin,i=o.util,r=i.addClass,n=i.after,h=i.assign,l=i.append,a=i.attr,d=i.before,s=i.closest,c=i.css,u=i.height,p=i.fastdom,f=i.getPos,g=i.includes,m=i.index,v=i.isInput,w=i.noop,$=i.offset,b=i.off,y=i.on,x=i.pointerDown,S=i.pointerMove,E=i.pointerUp,k=i.position,D=i.preventClick,C=i.Promise,N=i.remove,Y=i.removeClass,I=i.toggleClass,P=i.toNodes,H=i.Transition,T=i.trigger,M=i.within;o.component("sortable",{mixins:[e.class],props:{group:String,animation:Number,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},defaults:{group:!1,animation:150,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1},init:function(){var r=this;["init","start","move","end"].forEach(function(t){var o=r[t];r[t]=function(t){r.scrollY=window.pageYOffset;var e=f(t),i=e.x,s=e.y;r.pos={x:i,y:s},o(t)}})},events:(t={},t[x]="init",t),update:{write:function(){if(this.clsEmpty&&I(this.$el,this.clsEmpty,!this.$el.children.length),this.drag){$(this.drag,{top:this.pos.y+this.origin.top,left:this.pos.x+this.origin.left});var t,e=$(this.drag).top,i=e+this.drag.offsetHeight;0<e&&e<this.scrollY?t=this.scrollY-5:i<u(document)&&i>u(window)+this.scrollY&&(t=this.scrollY+5),t&&setTimeout(function(){return window.scrollTo(window.scrollX,t)},5)}}},methods:{init:function(t){var e=t.target,i=t.button,s=t.defaultPrevented,o=P(this.$el.children).filter(function(t){return M(e,t)})[0];!o||v(t.target)||this.handle&&!M(e,this.handle)||0<i||M(e,"."+this.clsNoDrag)||s||(t.preventDefault(),this.touched=[this],this.placeholder=o,this.origin=h({target:e,index:m(o)},this.pos),y(document,S,this.move),y(document,E,this.end),y(window,"scroll",this.scroll),this.threshold||this.start(t))},start:function(t){this.drag=l(o.container,this.placeholder.outerHTML.replace(/^<li/i,"<div").replace(/li>$/i,"div>")),c(this.drag,h({boxSizing:"border-box",width:this.placeholder.offsetWidth,height:this.placeholder.offsetHeight},c(this.placeholder,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),a(this.drag,"uk-no-boot",""),r(this.drag,this.clsDrag,this.clsCustom),u(this.drag.firstElementChild,u(this.placeholder.firstElementChild));var e=$(this.placeholder),i=e.left,s=e.top;h(this.origin,{left:i-this.pos.x,top:s-this.pos.y}),r(this.placeholder,this.clsPlaceholder),r(this.$el.children,this.clsItem),r(document.documentElement,this.clsDragState),T(this.$el,"start",[this,this.placeholder,this.drag]),this.move(t)},move:function(t){if(this.drag){this.$emit();var e="mousemove"===t.type?t.target:document.elementFromPoint(this.pos.x-document.body.scrollLeft,this.pos.y-document.body.scrollTop),i=U(e),s=U(this.placeholder),o=i!==s;if(i&&!M(e,this.placeholder)&&(!o||i.group&&i.group===s.group)){if(e=i.$el===e.parentNode&&e||P(i.$el.children).filter(function(t){return M(e,t)})[0],o)s.remove(this.placeholder);else if(!e)return;i.insert(this.placeholder,e),g(this.touched,i)||this.touched.push(i)}}else(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},scroll:function(){var t=window.pageYOffset;t!==this.scrollY&&(this.pos.y+=t-this.scrollY,this.scrollY=t,this.$emit())},end:function(t){if(b(document,S,this.move),b(document,E,this.end),b(window,"scroll",this.scroll),this.drag){D();var e=U(this.placeholder);this===e?this.origin.index!==m(this.placeholder)&&T(this.$el,"moved",[this,this.placeholder]):(T(e.$el,"added",[e,this.placeholder]),T(this.$el,"removed",[this,this.placeholder])),T(this.$el,"stop",[this]),N(this.drag),this.drag=null;var i=this.touched.map(function(t){return t.clsPlaceholder+" "+t.clsItem}).join(" ");this.touched.forEach(function(t){return Y(t.$el.children,i)}),Y(document.documentElement,this.clsDragState)}else"mouseup"!==t.type&&M(t.target,"a[href]")&&(location.href=s(t.target,"a[href]").href)},insert:function(i,s){var o=this;r(this.$el.children,this.clsItem);var t=function(){var t,e;s?!M(i,o.$el)||(e=s,(t=i).parentNode===e.parentNode&&m(t)>m(e))?d(s,i):n(s,i):l(o.$el,i)};this.animation?this.animate(t):t()},remove:function(t){M(t,this.$el)&&(this.animation?this.animate(function(){return N(t)}):N(t))},animate:function(t){var i=this,s=[],e=P(this.$el.children),o={position:"",width:"",height:"",pointerEvents:"",top:"",left:"",bottom:"",right:""};e.forEach(function(t){s.push(h({position:"absolute",pointerEvents:"none",width:t.offsetWidth,height:t.offsetHeight},k(t)))}),t(),e.forEach(H.cancel),c(this.$el.children,o),this.$update("update",!0),p.flush(),c(this.$el,"minHeight",u(this.$el));var r=e.map(function(t){return k(t)});C.all(e.map(function(t,e){return H.start(c(t,s[e]),r[e],i.animation)})).then(function(){c(i.$el,"minHeight",""),c(e,o),i.$update("update",!0),p.flush()},w)}}})}function U(t){return t&&(o.getComponent(t,"sortable")||U(t.parentNode))}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(B),B});