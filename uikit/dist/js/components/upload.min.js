/*! UIkit 3.0.0-beta.40 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitupload",t):e.UIkitUpload=t()}(this,function(){"use strict";function f(e){if(!f.installed){var t=e.util,a=t.addClass,l=t.ajax,r=t.matches,i=t.noop,o=t.on,n=t.removeClass,s=t.trigger;e.component("upload",{props:{allow:String,clsDragover:String,concurrent:Number,maxSize:Number,mime:String,msgInvalidMime:String,msgInvalidName:String,msgInvalidSize:String,multiple:Boolean,name:String,params:Object,type:String,url:String},defaults:{allow:!1,clsDragover:"uk-dragover",concurrent:1,maxSize:0,mime:!1,msgInvalidMime:"Invalid File Type: %s",msgInvalidName:"Invalid File Name: %s",msgInvalidSize:"Invalid File Size: %s Bytes Max",multiple:!1,name:"files[]",params:{},type:"POST",url:"",abort:i,beforeAll:i,beforeSend:i,complete:i,completeAll:i,error:i,fail:i,load:i,loadEnd:i,loadStart:i,progress:i},events:{change:function(e){r(e.target,'input[type="file"]')&&(e.preventDefault(),e.target.files&&this.upload(e.target.files),e.target.value="")},drop:function(e){u(e);var t=e.dataTransfer;t&&t.files&&(n(this.$el,this.clsDragover),this.upload(t.files))},dragenter:function(e){u(e)},dragover:function(e){u(e),a(this.$el,this.clsDragover)},dragleave:function(e){u(e),n(this.$el,this.clsDragover)}},methods:{upload:function(e){var r=this;if(e.length){s(this.$el,"upload",[e]);for(var t=0;t<e.length;t++){if(r.maxSize&&1e3*r.maxSize<e[t].size)return void r.fail(r.msgInvalidSize.replace("%s",r.allow));if(r.allow&&!d(r.allow,e[t].name))return void r.fail(r.msgInvalidName.replace("%s",r.allow));if(r.mime&&!d(r.mime,e[t].type))return void r.fail(r.msgInvalidMime.replace("%s",r.mime))}this.multiple||(e=[e[0]]),this.beforeAll(this,e);var i=function(e,t){for(var a=[],r=0;r<e.length;r+=t){for(var i=[],n=0;n<t;n++)i.push(e[r+n]);a.push(i)}return a}(e,this.concurrent),n=function(e){var t=new FormData;for(var a in e.forEach(function(e){return t.append(r.name,e)}),r.params)t.append(a,r.params[a]);l(r.url,{data:t,method:r.type,beforeSend:function(e){var t=e.xhr;t.upload&&o(t.upload,"progress",r.progress),["loadStart","load","loadEnd","abort"].forEach(function(e){return o(t,e.toLowerCase(),r[e])}),r.beforeSend(e)}}).then(function(e){r.complete(e),i.length?n(i.shift()):r.completeAll(e)},function(e){return r.error(e.message)})};n(i.shift())}}}})}function d(e,t){return t.match(new RegExp("^"+e.replace(/\//g,"\\/").replace(/\*\*/g,"(\\/[^\\/]+)*").replace(/\*/g,"[^\\/]+").replace(/((?!\\))\?/g,"$1.")+"$","i"))}function u(e){e.preventDefault(),e.stopPropagation()}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(f),f});