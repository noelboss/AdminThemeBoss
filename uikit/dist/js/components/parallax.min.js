/*! UIkit 3.0.0-beta.40 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function s(e){if(!s.installed){var t=e.mixin,r=e.util,m=r.css,p=r.Dimensions,i=r.each,a=r.getImage,b=r.includes,o=r.isNumber,v=r.isUndefined,k=r.toFloat,n=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];t.parallax={props:n.reduce(function(e,t){return e[t]="list",e},{media:"media"}),defaults:n.reduce(function(e,t){return e[t]=void 0,e},{media:!1}),computed:{props:function(d,h){var g=this;return n.reduce(function(e,t){if(v(d[t]))return e;var r,i,a,n=t.match(/color/i),o=n||"opacity"===t,s=d[t].slice(0);o&&m(h,t,""),s.length<2&&s.unshift(("scale"===t?1:o?m(h,t):0)||0);var c=b(s.join(""),"%")?"%":"px";if(n){var u=h.style.color;s=s.map(function(e){return m(m(h,"color",e),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return k(e)})}),h.style.color=u}else s=s.map(k);if(t.match(/^bg/))if(m(h,"background-position-"+t[2],""),i=m(h,"backgroundPosition").split(" ")["x"===t[2]?0:1],g.covers){var l=Math.min.apply(Math,s),f=Math.max.apply(Math,s),p=s.indexOf(l)<s.indexOf(f);a=f-l,s=s.map(function(e){return e-(p?l:f)}),r=(p?-a:0)+"px"}else r=i;return e[t]={steps:s,unit:c,pos:r,bgPos:i,diff:a},e},{})},bgProps:function(){var t=this;return["bgx","bgy"].filter(function(e){return e in t.props})},covers:function(e,t){return"cover"===m(""!==t.style.backgroundSize?m(t,"backgroundSize",""):t,"backgroundSize")}},disconnected:function(){delete this._image},update:[{read:function(t){var r=this;if(t.active=!this.media||window.matchMedia(this.media).matches,t.image&&(t.image.dimEl={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),!("image"in t)&&this.covers&&this.bgProps.length){var e=m(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");e&&(t.image=!1,a(e).then(function(e){t.image={width:e.naturalWidth,height:e.naturalHeight},r.$emit()}))}},write:function(e){var c=this,u=e.image,t=e.active;if(u)if(t){var l=u.dimEl,f=p.cover(u,l);this.bgProps.forEach(function(e){var t=c.props[e],r=t.diff,i=t.bgPos,a=t.steps,n="bgy"===e?"height":"width",o=f[n]-l[n];if(i.match(/%$|0px/)){if(o<r)l[n]=f[n]+r-o;else if(r<o){var s=parseFloat(i);s&&(c.props[e].steps=a.map(function(e){return e-(o-r)/(100/s)}))}f=p.cover(u,l)}}),m(this.$el,{backgroundSize:f.width+"px "+f.height+"px",backgroundRepeat:"no-repeat"})}else m(this.$el,{backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var r=this;i(this.getCss(0),function(e,t){return m(r.$el,t,"")})},getCss:function(h){var g=this.props,m=!1;return Object.keys(g).reduce(function(e,t){var r=g[t],i=r.steps,a=r.unit,n=r.pos,o=y(i,h);switch(t){case"x":case"y":if(m)break;var s=["x","y"].map(function(e){return t===e?o+a:g[e]?y(g[e].steps,h)+g[e].unit:0}),c=s[0],u=s[1];m=e.transform+=" translate3d("+c+", "+u+", 0)";break;case"rotate":e.transform+=" rotate("+o+"deg)";break;case"scale":e.transform+=" scale("+o+")";break;case"bgy":case"bgx":e["background-position-"+t[2]]="calc("+n+" + "+(o+a)+")";break;case"color":case"backgroundColor":case"borderColor":var l=x(i,h),f=l[0],p=l[1],d=l[2];e[t]="rgba("+f.map(function(e,t){return e+=d*(p[t]-e),3===t?k(e):parseInt(e,10)}).join(",")+")";break;case"blur":e.filter+=" blur("+o+"px)";break;case"hue":e.filter+=" hue-rotate("+o+"deg)";break;case"fopacity":e.filter+=" opacity("+o+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":e.filter+=" "+t+"("+o+"%)";break;default:e[t]=o}return e},{transform:"",filter:""})}}}}function x(e,t){var r=e.length-1,i=Math.min(Math.floor(r*t),r-1),a=e.slice(i,i+2);return a.push(1===t?1:t%(1/r)*r),a}function y(e,t){var r=x(e,t),i=r[0],a=r[1],n=r[2];return(o(i)?i+Math.abs(i-a)*n*(i<a?1:-1):+a).toFixed(2)}}function c(e){if(!c.installed){e.use(s);var t=e.mixin,r=e.util,i=r.clamp,n=r.css,a=r.scrolledOver,o=r.query;e.component("parallax",{mixins:[t.parallax],props:{target:String,viewport:Number,easing:Number},defaults:{target:!1,viewport:1,easing:1},computed:{target:function(e,t){var r=e.target;return r&&o(r,t)||t}},update:[{read:function(e){var t,r;return{prev:e.percent,percent:(t=a(this.target)/(this.viewport||1),r=this.easing,i(t*(1-(r-r*t))))}},write:function(e,t){var r=e.prev,i=e.percent,a=e.active;"scroll"!==t.type&&(r=!1),a?r!==i&&n(this.$el,this.getCss(i)):this.reset()},events:["scroll","load","resize"]}]})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(s),"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(c),c});